
````markdown
Лабораторная работа: Обмен данными по именованным каналам

 Описание
Эта лабораторная работа посвящена разработке программы для управления доступом параллельных процессов к файлу с использованием именованных каналов. Программа состоит из двух процессов: серверного и клиентского.

Сервер управляет доступом к бинарному файлу, содержащему информацию о сотрудниках. Клиенты могут запрашивать данные для чтения или модификации через именованные каналы. Для предотвращения конфликтов доступа к данным сервер использует механизмы блокировок на запись и чтение.

 Структура программы

 1. Процесс-сервер
Процесс-сервер выполняет следующие действия:

- Создание бинарного файла с записями сотрудников:
  Структура записи:
  struct employee {
      int num;      // Идентификационный номер сотрудника
      char name[10]; // Имя сотрудника
      double hours;  // Количество отработанных часов
  };
````

Имя файла и данные о сотрудниках вводятся с консоли.

* **Вывод содержимого файла** на консоль после его создания.

* **Запуск процессов-клиентов**. Количество клиентов вводится с консоли. Каждый клиент получает доступ к файлу через именованный канал.

* **Обслуживание запросов клиентов**:

  * **Модификация записи**: блокируется доступ к записи для других процессов до завершения модификации.
  * **Чтение записи**: блокируется доступ к записи для других клиентов, если они запрашивают модификацию.

* **Вывод измененного файла** на консоль после завершения работы всех клиентов.

* **Завершение работы** по команде с консоли.

### 2. Процесс-клиент

Каждый клиент выполняет следующие действия:

* Запрашивает с консоли одну из операций:

  * Модификация записи файла
  * Чтение записи
  * Выход из программы

* Доступ к записи осуществляется по **идентификационному номеру сотрудника (ID)**.

* **При модификации записи**:

  1. Запрашивает ключ записи (ID сотрудника).
  2. Посылает запрос на сервер.
  3. Выводит полученную запись на консоль.
  4. Запрашивает новые значения полей.
  5. По команде с консоли отправляет измененную запись обратно на сервер.
  6. Завершает доступ к записи.

* **При чтении записи**:

  1. Запрашивает ключ записи (ID сотрудника).
  2. Посылает запрос на сервер.
  3. Выводит полученную запись на консоль.

## Инструкция по запуску

### Запуск программы

1. **Запустите процесс-сервер**:
   После сборки и создания бинарных файлов запустите сервер:

   ```bash
   ./build/Debug/OS_LAB_5
   ```

2. **Запустите процесс-клиенты**:
   Клиенты автоматически подключаются к серверу и могут выполнять операции (чтение/модификация) по запросу. Например:

   ```bash
   ./build/Debug/Client
   ```

### Пример взаимодействия

1. Сервер создаст файл с записями сотрудников.
2. Клиенты смогут выбрать операцию: чтение или модификация записи.
3. Сервер будет управлять доступом к записи и блокировать доступ в зависимости от типа операции (чтение или модификация).

## Структура проекта

```
.
├── CMakeLists.txt       # Основной CMake файл проекта
├── README.md            # Документация проекта
├── Server               # Папка с исходниками сервера
│   ├── ServerApp.cpp
│   ├── RecordManager.cpp
│   └── ...
├── Client               # Папка с исходниками клиента
│   ├── ClientApp.cpp
│   ├── PipeClient.cpp
│   └── ...
└── tests                # Папка с тестами
    ├── clienttests.cpp
    ├── servertest.cpp
    └── ...
```

